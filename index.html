<!DOCTYPE html>
<html>
<head>

<meta charset="ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
	<script type="text/javascript"
		src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
	 <script type="text/javascript">
    //var recognition = new SpeechRecognition();
    
    var recognition = new webkitSpeechRecognition();
recognition.continuous = true;
recognition.interimResults = true;
showInfo('info_start');
showInfo('info_speak_now');
recognition.onresult = function(event) { 
  console.log(event);
  if (event.results.length > 0) {
      q.value = event.results[0][0].transcript;
      q.form.submit();
    }
}
    /* recognition.onresult = function(event) {
      if (event.results.length > 0) {
        q.value = event.results[0][0].transcript;
        q.form.submit();
      }
    } */
    function startButton(event) {
    	  if (recognizing) {
    	    recognition.stop();
    	    return;
    	  }
    	  final_transcript = '';
    	  recognition.lang = select_dialect.value;
    	  recognition.start();
    	  ignore_onend = false;
    	  final_span.innerHTML = '';
    	  interim_span.innerHTML = '';
    	  //start_img.src = '/intl/en/chrome/assets/common/images/content/mic-slash.gif';
    	  showInfo('info_allow');
    	  showButtons('none');
    	  start_timestamp = event.timeStamp;
    	}

    
    function showInfo(s) {
    	  if (s) {
    	    for (var child = info.firstChild; child; child = child.nextSibling) {
    	      if (child.style) {
    	        child.style.display = child.id == s ? 'inline' : 'none';
    	      }
    	    }
    	    info.style.visibility = 'visible';
    	  } else {
    	    info.style.visibility = 'hidden';
    	  }
    	}
  </script>

	<form action="http://www.example.com/search">
		<input type="search" id="q" name="q" size=60> <input
			type="button" value="Click to Speak" onclick="startButton(event)">
	</form>

</body>
</html>
